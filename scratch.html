<!DOCTYPE html>
<html>
<body>press any key to download </body>
<script>
	function main() {
		document.body.innerHTML = 'rendering';
		const ctx = new OfflineAudioContext(1, 48000, 48000);
		const osc1 = new OscillatorNode(ctx, {frequency: 440, type: "square"});
		const osc2 = new OscillatorNode(ctx, {frequency: 220, type: "sine"});

		osc1.connect(ctx.destination);
		osc2.connect(ctx.destination);
		osc1.start();
		osc2.start();
		osc1.stop(1);
		osc2.stop(1);
		ctx.startRendering().then(ab => {
			const dataurl = URL.createObjectURL(new Blob([ab.getChannelData(0)], {type: "audio/pcm", "endings": "transparent"}));
			const link = document.createElement("a");
			link.innerText = "ready";
			link.href = dataurl;
			document.body.appendChild(link);

		}).catch(console.error)
	}
	window.onkeydown = main; //();

</script>
</html>
