
	// @prettier-ignore
export const wasmbin=new Uint8Array([0,97,115,109,1,0,0,0,1,47,8,96,0,1,127,96,1,127,1,127,96,0,0,96,1,127,0,96,3,127,127,127,1,127,96,3,127,126,127,1,126,96,3,127,125,125,1,125,96,5,125,125,125,125,125,1,125,3,22,21,2,4,6,7,1,2,2,0,0,0,3,1,1,3,3,3,0,2,1,1,0,4,5,1,112,1,2,2,5,6,1,1,128,2,128,2,6,19,3,127,1,65,176,136,192,2,11,127,1,65,0,11,127,1,65,0,11,7,239,1,14,6,109,101,109,111,114,121,2,0,4,105,110,105,116,0,1,8,115,101,116,82,97,116,105,111,0,2,19,117,112,115,97,109,112,108,101,95,119,97,118,101,95,116,97,98,108,101,0,4,11,95,105,110,105,116,105,97,108,105,122,101,0,5,25,95,95,105,110,100,105,114,101,99,116,95,102,117,110,99,116,105,111,110,95,116,97,98,108,101,1,0,16,95,95,101,114,114,110,111,95,108,111,99,97,116,105,111,110,0,20,6,102,102,108,117,115,104,0,18,9,115,116,97,99,107,83,97,118,101,0,9,12,115,116,97,99,107,82,101,115,116,111,114,101,0,10,10,115,116,97,99,107,65,108,108,111,99,0,11,21,101,109,115,99,114,105,112,116,101,110,95,115,116,97,99,107,95,105,110,105,116,0,6,25,101,109,115,99,114,105,112,116,101,110,95,115,116,97,99,107,95,103,101,116,95,102,114,101,101,0,7,24,101,109,115,99,114,105,112,116,101,110,95,115,116,97,99,107,95,103,101,116,95,101,110,100,0,8,9,7,1,0,65,1,11,1,0,10,213,14,21,4,0,16,6,11,122,1,12,127,35,0,33,3,65,16,33,4,32,3,32,4,107,33,5,32,5,32,0,54,2,12,32,5,32,1,54,2,8,32,5,32,2,54,2,4,65,128,32,33,6,65,0,33,7,32,7,32,6,54,2,136,8,32,5,40,2,8,33,8,65,0,33,9,32,9,32,8,54,2,128,8,32,5,40,2,12,33,10,65,0,33,11,32,11,32,10,54,2,152,8,32,5,40,2,4,33,12,65,0,33,13,32,13,32,12,54,2,132,8,65,128,8,33,14,32,14,15,11,106,2,7,127,4,125,35,0,33,3,65,16,33,4,32,3,32,4,107,33,5,32,5,32,0,54,2,12,32,5,32,1,56,2,8,32,5,32,2,56,2,4,32,5,40,2,12,33,6,32,6,40,2,8,33,7,32,7,178,33,10,32,5,42,2,8,33,11,32,10,32,11,149,33,12,32,5,40,2,12,33,8,32,8,32,12,56,2,16,32,5,40,2,12,33,9,32,9,42,2,16,33,13,32,13,15,11,218,2,2,3,127,36,125,35,0,33,5,65,48,33,6,32,5,32,6,107,33,7,32,7,32,0,56,2,44,32,7,32,1,56,2,40,32,7,32,2,56,2,36,32,7,32,3,56,2,32,32,7,32,4,56,2,28,32,7,42,2,32,33,8,32,7,42,2,40,33,9,32,8,32,9,147,33,10,67,0,0,0,63,33,11,32,10,32,11,148,33,12,32,7,32,12,56,2,24,32,7,42,2,36,33,13,32,7,42,2,32,33,14,32,13,32,14,147,33,15,32,7,32,15,56,2,20,32,7,42,2,24,33,16,32,7,42,2,20,33,17,32,16,32,17,146,33,18,32,7,32,18,56,2,16,32,7,42,2,16,33,19,32,7,42,2,20,33,20,32,19,32,20,146,33,21,32,7,42,2,28,33,22,32,7,42,2,36,33,23,32,22,32,23,147,33,24,67,0,0,0,63,33,25,32,24,32,25,148,33,26,32,21,32,26,146,33,27,32,7,32,27,56,2,12,32,7,42,2,16,33,28,32,7,42,2,12,33,29,32,28,32,29,146,33,30,32,7,32,30,56,2,8,32,7,42,2,12,33,31,32,7,42,2,44,33,32,32,31,32,32,148,33,33,32,7,42,2,8,33,34,32,33,32,34,147,33,35,32,7,42,2,44,33,36,32,35,32,36,148,33,37,32,7,42,2,24,33,38,32,37,32,38,146,33,39,32,7,42,2,44,33,40,32,39,32,40,148,33,41,32,7,42,2,36,33,42,32,41,32,42,146,33,43,32,43,15,11,252,6,2,97,127,19,125,35,0,33,1,65,32,33,2,32,1,32,2,107,33,3,32,3,36,0,32,3,32,0,54,2,24,32,3,40,2,24,33,4,65,0,33,5,32,5,178,33,98,32,4,32,98,56,2,20,32,3,40,2,24,33,6,65,0,33,7,32,6,32,7,54,2,12,65,0,33,8,32,3,32,8,54,2,20,3,64,32,3,40,2,24,33,9,32,9,40,2,12,33,10,32,3,40,2,24,33,11,32,11,40,2,4,33,12,65,2,33,13,32,12,32,13,107,33,14,32,10,33,15,32,14,33,16,32,15,32,16,72,33,17,65,0,33,18,65,1,33,19,32,17,32,19,113,33,20,32,18,33,21,2,64,32,20,69,13,0,32,3,40,2,20,33,22,32,3,40,2,24,33,23,32,23,40,2,8,33,24,32,22,33,25,32,24,33,26,32,25,32,26,72,33,27,32,27,33,21,11,32,21,33,28,65,1,33,29,32,28,32,29,113,33,30,2,64,32,30,69,13,0,32,3,40,2,24,33,31,32,31,40,2,0,33,32,32,3,40,2,24,33,33,32,33,40,2,12,33,34,65,2,33,35,32,34,32,35,116,33,36,32,32,32,36,106,33,37,65,124,33,38,32,37,32,38,106,33,39,32,39,42,2,0,33,99,32,3,32,99,56,2,16,32,3,40,2,24,33,40,32,40,40,2,0,33,41,32,3,40,2,24,33,42,32,42,40,2,12,33,43,65,2,33,44,32,43,32,44,116,33,45,32,41,32,45,106,33,46,32,46,42,2,0,33,100,32,3,32,100,56,2,12,32,3,40,2,24,33,47,32,47,40,2,0,33,48,32,3,40,2,24,33,49,32,49,40,2,12,33,50,65,2,33,51,32,50,32,51,116,33,52,32,48,32,52,106,33,53,32,53,42,2,4,33,101,32,3,32,101,56,2,8,32,3,40,2,24,33,54,32,54,40,2,0,33,55,32,3,40,2,24,33,56,32,56,40,2,12,33,57,65,2,33,58,32,57,32,58,116,33,59,32,55,32,59,106,33,60,32,60,42,2,8,33,102,32,3,32,102,56,2,4,32,3,40,2,24,33,61,32,61,42,2,20,33,103,32,3,42,2,16,33,104,32,3,42,2,12,33,105,32,3,42,2,8,33,106,32,3,42,2,4,33,107,32,103,32,104,32,105,32,106,32,107,16,3,33,108,32,3,40,2,24,33,62,32,62,40,2,24,33,63,32,3,40,2,20,33,64,65,2,33,65,32,64,32,65,116,33,66,32,63,32,66,106,33,67,32,67,32,108,56,2,0,32,3,40,2,24,33,68,32,68,42,2,16,33,109,32,3,40,2,24,33,69,32,69,42,2,20,33,110,32,110,32,109,146,33,111,32,69,32,111,56,2,20,32,3,40,2,24,33,70,32,70,42,2,20,33,112,67,0,0,128,63,33,113,32,112,32,113,96,33,71,65,1,33,72,32,71,32,72,113,33,73,2,64,32,73,69,13,0,32,3,40,2,24,33,74,32,74,42,2,20,33,114,67,0,0,128,191,33,115,32,114,32,115,146,33,116,32,74,32,116,56,2,20,32,3,40,2,24,33,75,32,75,40,2,12,33,76,65,1,33,77,32,76,32,77,106,33,78,32,75,32,78,54,2,12,11,32,3,40,2,20,33,79,65,1,33,80,32,79,32,80,106,33,81,32,3,32,81,54,2,20,12,1,11,11,32,3,40,2,24,33,82,32,82,40,2,12,33,83,32,3,40,2,24,33,84,32,84,40,2,4,33,85,65,3,33,86,32,85,32,86,107,33,87,32,83,33,88,32,87,33,89,32,88,32,89,72,33,90,65,1,33,91,32,90,32,91,113,33,92,2,64,2,64,32,92,69,13,0,65,0,33,93,32,3,32,93,54,2,28,12,1,11,65,1,33,94,32,3,32,94,54,2,28,11,32,3,40,2,28,33,95,65,32,33,96,32,3,32,96,106,33,97,32,97,36,0,32,95,15,11,12,0,2,64,65,1,69,13,0,16,0,11,11,20,0,65,176,136,192,2,36,2,65,176,8,65,15,106,65,112,113,36,1,11,7,0,35,0,35,1,107,11,4,0,35,1,11,4,0,35,0,11,6,0,32,0,36,0,11,18,1,2,127,35,0,32,0,107,65,112,113,34,1,36,0,32,1,11,4,0,65,1,11,2,0,11,2,0,11,2,0,11,10,0,65,156,8,16,14,65,164,8,11,7,0,65,156,8,16,15,11,172,1,1,2,127,2,64,2,64,32,0,69,13,0,2,64,32,0,40,2,76,65,127,74,13,0,32,0,16,19,15,11,32,0,16,12,33,1,32,0,16,19,33,2,32,1,69,13,1,32,0,16,13,32,2,15,11,65,0,33,2,2,64,65,0,40,2,168,8,69,13,0,65,0,40,2,168,8,16,18,33,2,11,2,64,16,16,40,2,0,34,0,69,13,0,3,64,65,0,33,1,2,64,32,0,40,2,76,65,0,72,13,0,32,0,16,12,33,1,11,2,64,32,0,40,2,20,32,0,40,2,28,77,13,0,32,0,16,19,32,2,114,33,2,11,2,64,32,1,69,13,0,32,0,16,13,11,32,0,40,2,56,34,0,13,0,11,11,16,17,11,32,2,11,107,1,2,127,2,64,32,0,40,2,20,32,0,40,2,28,77,13,0,32,0,65,0,65,0,32,0,40,2,36,17,4,0,26,32,0,40,2,20,13,0,65,127,15,11,2,64,32,0,40,2,4,34,1,32,0,40,2,8,34,2,79,13,0,32,0,32,1,32,2,107,172,65,1,32,0,40,2,40,17,5,0,26,11,32,0,65,0,54,2,28,32,0,66,0,55,3,16,32,0,66,0,55,2,4,65,0,11,5,0,65,172,8,11]);
export default function(){
	const module=new WebAssembly.Module(wasmbin);
	const instance = new WebAssembly.Instance(module, {env:{
		powf:Math.pow
	}});
	const heap = new Uint8Array(instance.exports.memory.buffer);


	return function *upsample(input, pitch, sampleRate){
		const output = instance.exports.stackAlloc(4096);
		const sampleRef = instance.exports.stackAlloc(input.byteLength);
		const ref = instance.exports.init(output, sampleRef, input.byteLength);
		const s16 = new Int16Array(input);
		const fl = new Float32Array(input.byteLength / 2);
		s16.forEach((v, i) => (fl[i] = v / 0xffff));
		heap.set(new Uint8Array(fl.buffer), sampleRef);
		instance.exports.setRatio(
			ref,
			sampleRate,
			Math.pow(2, (pitch - 69) / 12) * 440.0
		);
		
		if(instance.exports.upsample_wave_table(ref)==1){
			return new Float32Array(heap.buffer, output, 4096);
		}else{
			yield new Float32Array(heap.buffer, output, 4096);
		}
	}
}